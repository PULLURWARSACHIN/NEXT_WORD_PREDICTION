# -*- coding: utf-8 -*-
"""Next_word_prediction.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1o7YyPETz6OMtmPuTCBe1IGTTLKAAqNxH
"""

import numpy as np

lexicon = {}

def update_lexicon(current : str, next_word : str) -> None:
    if current not in lexicon:
        lexicon.update({current: {next_word: 1} })
        return

    options = lexicon[current]

    if next_word not in options:
        options.update({next_word : 1})
    else:
        options.update({next_word : options[next_word] + 1})

    lexicon[current] = options

with open('next_word_data.txt', 'r') as next_word_data:
    for line in next_word_data:
        words = line.strip().split(' ')
        for i in range(len(words) - 1):
            update_lexicon(words[i], words[i+1])

for word, transition in lexicon.items():
    transition = dict((key, value / sum(transition.values())) for key, value in transition.items())
    lexicon[word] = transition
    
line = input('> ')
word = line.strip().split(' ')[-1]
if word not in lexicon:
    print('Word not found')
else:
    options = lexicon[word]
    predicted = np.random.choice(list(options.keys()), p=list(options.values()))
    print(line + ' ' + predicted)